import base64
code = '''ZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIHJlcXVlc3QsIHJlbmRlcl90ZW1wbGF0ZSwgc2VuZF9mcm9tX2RpcmVjdG9yeSwgYWJvcnQKaW1wb3J0IG9zbW54IGFzIG94CmltcG9ydCBnZW9wYW5kYXMgYXMgZ3BkCmltcG9ydCBmb2xpdW0KaW1wb3J0IG9zCmltcG9ydCBwYW5kYXMgYXMgcGQKaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IHJlCgphcHAgPSBGbGFzayhfX25hbWVfXykKCiMg0KHQvtC30LTQsNC90LjQtSDQvdC10L7QsdGF0L7QtNC40LzRi9GFINC/0LDQv9C+0LoKZGVmIGNyZWF0ZV9kYXRhX2RpcmVjdG9yeSgpOgogICAgYmFzZV9kaXIgPSAnZGF0YScKICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhiYXNlX2Rpcik6CiAgICAgICAgb3MubWFrZWRpcnMoYmFzZV9kaXIpCgojINCS0LDQu9C40LTQsNGG0LjRjyDQvdCw0LfQstCw0L3QuNGPINC80LXRgdGC0LAg0LTQu9GPINC30LDRidC40YLRiyDQvtGCINC40L3RitC10LrRhtC40LkKZGVmIHZhbGlkYXRlX3BsYWNlX25hbWUocGxhY2VfbmFtZSk6CiAgICByZXR1cm4gcmUubWF0Y2gociJeW2EtekEtWjAtOV9cLVxzXSskIiwgcGxhY2VfbmFtZSkgaXMgbm90IE5vbmUKCiMg0JHQtdC30L7Qv9Cw0YHQvdCw0Y8g0YTRg9C90LrRhtC40Y8g0LTQu9GPINGA0LDQsdC+0YLRiyDRgSDQv9GD0YLRj9C80LgKZGVmIHNhZmVfcGF0aChiYXNlX2RpciwgKnBhdGhzKToKICAgIGZ1bGxfcGF0aCA9IG9zLnBhdGguYWJzcGF0aChvcy5wYXRoLmpvaW4oYmFzZV9kaXIsICpwYXRocykpCiAgICBpZiBub3QgZnVsbF9wYXRoLnN0YXJ0c3dpdGgob3MucGF0aC5hYnNwYXRoKGJhc2VfZGlyKSk6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiRGV0ZWN0ZWQgcGF0aCB0cmF2ZXJzYWwgYXR0ZW1wdCEiKQogICAgcmV0dXJuIGZ1bGxfcGF0aAoKIyDQodC+0YXRgNCw0L3QtdC90LjQtSDQutC+0L7RgNC00LjQvdCw0YIg0LLQviDQstC90LXRiNC90LjQuSDRhNCw0LnQuwpkZWYgc2F2ZV9jb29yZGluYXRlcyhtaWxpdGFyeV96b25lcywgb3V0cHV0X2Zvcm1hdCwgcGxhY2VfbmFtZSk6CiAgICBkYXRhID0gW10KICAgIGZvciBpZHgsIGdlb20gaW4gZW51bWVyYXRlKG1pbGl0YXJ5X3pvbmVzLmdlb21ldHJ5KToKICAgICAgICBuYW1lID0gc3RyKG1pbGl0YXJ5X3pvbmVzWyduYW1lJ10uaWxvY1tpZHhdKSBpZiAnbmFtZScgaW4gbWlsaXRhcnlfem9uZXMgZWxzZSAnTm90IHNwZWNpZmllZCcKICAgICAgICBjZW50cm9pZCA9IGdlb20uY2VudHJvaWQKICAgICAgICBjb29yZF9zdHIgPSBmIih7Y2VudHJvaWQueTouNmZ9LCB7Y2VudHJvaWQueDouNmZ9KSIKICAgICAgICBkYXRhLmFwcGVuZCgobmFtZSwgY29vcmRfc3RyKSkKICAgIAogICAgc29ydGVkX2RhdGEgPSBzb3J0ZWQoZGF0YSwga2V5PWxhbWJkYSB4OiAoeFswXSA9PSAnTm90IHNwZWNpZmllZCcsIHhbMF0pKQogICAgZGF0YV9kaXIgPSBzYWZlX3BhdGgoJ2RhdGEnLCBwbGFjZV9uYW1lLnJlcGxhY2UoIiAiLCAiXyIpKQogICAgb3MubWFrZWRpcnMoZGF0YV9kaXIsIGV4aXN0X29rPVRydWUpCiAgICAKICAgIGZpbGVfcGF0aCA9IE5vbmUKICAgIGlmIG91dHB1dF9mb3JtYXQgPT0gJ2Nzdic6CiAgICAgICAgZGYgPSBwZC5EYXRhRnJhbWUoc29ydGVkX2RhdGEsIGNvbHVtbnM9WyJOYW1lIiwgIkNvb3JkaW5hdGVzIl0pCiAgICAgICAgZmlsZV9wYXRoID0gb3MucGF0aC5qb2luKGRhdGFfZGlyLCBmJ3twbGFjZV9uYW1lLnJlcGxhY2UoIiAiLCAiXyIpfV9taWxpdGFyeV96b25lcy5jc3YnKQogICAgICAgIGRmLnRvX2NzdihmaWxlX3BhdGgsIGluZGV4PUZhbHNlKQogICAgZWxpZiBvdXRwdXRfZm9ybWF0ID09ICd0eHQnOgogICAgICAgIGZpbGVfcGF0aCA9IG9zLnBhdGguam9pbihkYXRhX2RpciwgZid7cGxhY2VfbmFtZS5yZXBsYWNlKCIgIiwgIl8iKX1fbWlsaXRhcnlfem9uZXMudHh0JykKICAgICAgICB3aXRoIG9wZW4oZmlsZV9wYXRoLCAndycsIGVuY29kaW5nPSd1dGYtOCcpIGFzIGY6CiAgICAgICAgICAgIGYud3JpdGUoZiJSZXN1bHRzIGZvcjoge3BsYWNlX25hbWV9XG4iKQogICAgICAgICAgICBmb3IgbmFtZSwgY29vcmQgaW4gc29ydGVkX2RhdGE6CiAgICAgICAgICAgICAgICBmLndyaXRlKGYie25hbWV9OiB7Y29vcmR9XG4iKQogICAgCiAgICByZXR1cm4gZmlsZV9wYXRoLCBkYXRhX2RpcgoKIyDQk9C70LDQstC90LDRjyDRgdGC0YDQsNC90LjRhtCwCkBhcHAucm91dGUoJy8nKQpkZWYgaG9tZSgpOgogICAgY3JlYXRlX2RhdGFfZGlyZWN0b3J5KCkgICMg0KHQvtC30LTQsNC10Lwg0L/QsNC/0LrRgyDQv9GA0Lgg0LrQsNC20LTQvtC8INC30LDQv9GD0YHQutC1CiAgICBkYXRhX2RpciA9ICdkYXRhLycKICAgIGZvbGRlcnMgPSBbZm9sZGVyIGZvciBmb2xkZXIgaW4gb3MubGlzdGRpcihkYXRhX2RpcikgaWYgb3MucGF0aC5pc2Rpcihvcy5wYXRoLmpvaW4oZGF0YV9kaXIsIGZvbGRlcikpXQogICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgnaW5kZXguaHRtbCcsIGZvbGRlcnM9Zm9sZGVycywgcmVzdWx0X21lc3NhZ2U9IiIpCgojINCh0L/QuNGB0L7QuiDRhNCw0LnQu9C+0LIg0LIg0L/QsNC/0LrQtQpAYXBwLnJvdXRlKCcvZGF0YS88cGF0aDpmb2xkZXI+LycpCmRlZiBsaXN0X2ZpbGVzKGZvbGRlcik6CiAgICB0cnk6CiAgICAgICAgZm9sZGVyX3BhdGggPSBzYWZlX3BhdGgoJ2RhdGEnLCBmb2xkZXIpCiAgICAgICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKGZvbGRlcl9wYXRoKSBvciBub3Qgb3MucGF0aC5pc2Rpcihmb2xkZXJfcGF0aCk6CiAgICAgICAgICAgIGFib3J0KDQwNCkKICAgICAgICBmaWxlcyA9IG9zLmxpc3RkaXIoZm9sZGVyX3BhdGgpCiAgICAgICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgnZm9sZGVyLmh0bWwnLCBmb2xkZXI9Zm9sZGVyLCBmaWxlcz1maWxlcykKICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgIGFib3J0KDQwMCkKICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgYWJvcnQoNTAwKQoKIyDQntGC0L/RgNCw0LLQutCwINGE0LDQudC70L7QsgpAYXBwLnJvdXRlKCcvZGF0YS88cGF0aDpmb2xkZXI+LzxwYXRoOmZpbGVuYW1lPicpCmRlZiBzZW5kX2RhdGEoZm9sZGVyLCBmaWxlbmFtZSk6CiAgICB0cnk6CiAgICAgICAgZGlyZWN0b3J5ID0gc2FmZV9wYXRoKCdkYXRhJywgZm9sZGVyKQogICAgICAgIHJldHVybiBzZW5kX2Zyb21fZGlyZWN0b3J5KGRpcmVjdG9yeSwgZmlsZW5hbWUpCiAgICBleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3I6CiAgICAgICAgYWJvcnQoNDA0KQogICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgYWJvcnQoNDAwKQoKIyDQntCx0YDQsNCx0L7RgtC60LAg0L/QvtC40YHQutCwCkBhcHAucm91dGUoJy9zZWFyY2gnLCBtZXRob2RzPVsnUE9TVCddKQpkZWYgc2VhcmNoKCk6CiAgICBwbGFjZV9uYW1lID0gcmVxdWVzdC5mb3JtWydwbGFjZV9uYW1lJ10KICAgIG91dHB1dF9mb3JtYXQgPSByZXF1ZXN0LmZvcm1bJ291dHB1dF9mb3JtYXQnXQogICAgCiAgICAjINCe0YfQuNGB0YLQutCwINC/0YDQtdC00YvQtNGD0YnQtdCz0L4g0YHQvtC+0LHRidC10L3QuNGPINC/0LXRgNC10LQg0L3QvtCy0YvQvCDQv9C+0LjRgdC60L7QvAogICAgcmVzdWx0X21lc3NhZ2UgPSAiIgoKICAgIGlmIG5vdCB2YWxpZGF0ZV9wbGFjZV9uYW1lKHBsYWNlX25hbWUpOgogICAgICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoJ2luZGV4Lmh0bWwnLCBmb2xkZXJzPW9zLmxpc3RkaXIoJ2RhdGEvJyksIHJlc3VsdF9tZXNzYWdlPSJJbnZhbGlkIHBsYWNlIG5hbWUuIikKICAgIAogICAgdHJ5OgogICAgICAgICMg0J/QvtC40YHQuiDQt9C+0L0KICAgICAgICB0YWdzID0geydtaWxpdGFyeSc6IFRydWUsICdsYW5kdXNlJzogJ21pbGl0YXJ5JywgJ2J1aWxkaW5nJzogJ21pbGl0YXJ5JywgJ2FtZW5pdHknOiAnbWlsaXRhcnknfQogICAgICAgIGFyZWFfYm91bmRhcnkgPSBveC5nZW9jb2RlX3RvX2dkZihwbGFjZV9uYW1lKQogICAgICAgIGFyZWFfZ2VvbSA9IGFyZWFfYm91bmRhcnkuZ2VvbWV0cnkudW5hcnlfdW5pb24KICAgICAgICBtaWxpdGFyeV96b25lcyA9IG94LmZlYXR1cmVzX2Zyb21fcG9seWdvbihhcmVhX2dlb20sIHRhZ3M9dGFncykKICAgICAgICAKICAgICAgICBpZiBtaWxpdGFyeV96b25lcy5lbXB0eToKICAgICAgICAgICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgnaW5kZXguaHRtbCcsIGZvbGRlcnM9b3MubGlzdGRpcignZGF0YS8nKSwgcmVzdWx0X21lc3NhZ2U9Ik1pbGl0YXJ5IHpvbmVzIG5vdCBmb3VuZC4iKQogICAgICAgIAogICAgICAgIGZpbGVfcGF0aCwgZGF0YV9kaXIgPSBzYXZlX2Nvb3JkaW5hdGVzKG1pbGl0YXJ5X3pvbmVzLCBvdXRwdXRfZm9ybWF0LCBwbGFjZV9uYW1lKQogICAgICAgIGlmIG5vdCBmaWxlX3BhdGg6CiAgICAgICAgICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoJ2luZGV4Lmh0bWwnLCBmb2xkZXJzPW9zLmxpc3RkaXIoJ2RhdGEvJyksIHJlc3VsdF9tZXNzYWdlPSJFcnJvciBzYXZpbmcgY29vcmRpbmF0ZXMuIikKICAgICAgICAKICAgICAgICAjINCf0L7RgdGC0YDQvtC10L3QuNC1INC60LDRgNGC0YsKICAgICAgICBjZW50cm9pZCA9IG1pbGl0YXJ5X3pvbmVzLmdlb21ldHJ5LmNlbnRyb2lkLmlsb2NbMF0KICAgICAgICBtYXBfb3NtID0gZm9saXVtLk1hcChsb2NhdGlvbj1bY2VudHJvaWQueSwgY2VudHJvaWQueF0sIHpvb21fc3RhcnQ9MTApCiAgICAgICAgZm9saXVtLlRpbGVMYXllcignQ2FydG9EQiBwb3NpdHJvbicsIG5hbWU9J1JlZ3VsYXIgTWFwJykuYWRkX3RvKG1hcF9vc20pCiAgICAgICAgZm9saXVtLlRpbGVMYXllcignQ2FydG9EQiBkYXJrX21hdHRlcicsIG5hbWU9J0RhcmsgTWFwJykuYWRkX3RvKG1hcF9vc20pCiAgICAgICAgCiAgICAgICAgIyDQlNC+0LHQsNCy0LvQtdC90LjQtSDQstC+0LXQvdC90YvRhSDQt9C+0L0g0L3QsCDQutCw0YDRgtGDCiAgICAgICAgZm9yIGlkeCwgZ2VvbSBpbiBlbnVtZXJhdGUobWlsaXRhcnlfem9uZXMuZ2VvbWV0cnkpOgogICAgICAgICAgICBuYW1lID0gbWlsaXRhcnlfem9uZXNbJ25hbWUnXS5pbG9jW2lkeF0gaWYgJ25hbWUnIGluIG1pbGl0YXJ5X3pvbmVzIGVsc2UgJ05vdCBzcGVjaWZpZWQnCiAgICAgICAgICAgIGlmIGdlb20uZ2VvbV90eXBlID09ICJQb2x5Z29uIjoKICAgICAgICAgICAgICAgIGNvb3JkcyA9IGxpc3QoZ2VvbS5leHRlcmlvci5jb29yZHMpCiAgICAgICAgICAgICAgICBmb2xpdW0uUG9seWdvbigKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbnM9Wyh5LCB4KSBmb3IgeCwgeSBpbiBjb29yZHNdLAogICAgICAgICAgICAgICAgICAgIGNvbG9yPSIjNmYwMDAwIiwKICAgICAgICAgICAgICAgICAgICBmaWxsPVRydWUsCiAgICAgICAgICAgICAgICAgICAgZmlsbF9jb2xvcj0iIzZmMDAwMCIsCiAgICAgICAgICAgICAgICAgICAgZmlsbF9vcGFjaXR5PTAuNSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ9MgogICAgICAgICAgICAgICAgKS5hZGRfdG8obWFwX29zbSkKICAgICAgICAgICAgICAgIGNlbnRyb2lkID0gZ2VvbS5jZW50cm9pZAogICAgICAgICAgICAgICAgZ21hcHNfdXJsID0gZiJodHRwczovL3d3dy5nb29nbGUuY29tL21hcHM/cT17Y2VudHJvaWQueX0se2NlbnRyb2lkLnh9IgogICAgICAgICAgICAgICAgcG9wdXBfY29udGVudCA9IGYiIiIKICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9J2ZvbnQtZmFtaWx5OiAiT3JiaXRyb24iLCBtb25vc3BhY2U7IGNvbG9yOiAjMDAwMDAwOyBmb250LXNpemU6IDEzcHg7Jz4KICAgICAgICAgICAgICAgICAgICA8Yj57bmFtZX08L2I+PGJyPgogICAgICAgICAgICAgICAgICAgIENvb3JkaW5hdGVzOiA8c3BhbiBzdHlsZT0nY29sb3I6ICM2ZjAwMDA7Jz57Y2VudHJvaWQueTouNmZ9LCB7Y2VudHJvaWQueDouNmZ9PC9zcGFuPjxicj4KICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSd7Z21hcHNfdXJsfScgdGFyZ2V0PSdfYmxhbmsnIHN0eWxlPSdjb2xvcjogIzZmMDAwMDsnPk9wZW4gaW4gR29vZ2xlIE1hcHM8L2E+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICIiIgogICAgICAgICAgICAgICAgZm9saXVtLk1hcmtlcigKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbj1bY2VudHJvaWQueSwgY2VudHJvaWQueF0sCiAgICAgICAgICAgICAgICAgICAgcG9wdXA9Zm9saXVtLlBvcHVwKHBvcHVwX2NvbnRlbnQsIG1heF93aWR0aD0zMDApLAogICAgICAgICAgICAgICAgICAgIGljb249Zm9saXVtLkljb24oY29sb3I9J2RhcmtyZWQnLCBpY29uPSdpbmZvLXNpZ24nKQogICAgICAgICAgICAgICAgKS5hZGRfdG8obWFwX29zbSkKCiAgICAgICAgCiAgICAgICAgZm9saXVtLkxheWVyQ29udHJvbCgpLmFkZF90byhtYXBfb3NtKQogICAgICAgIG1hcF9maWxlX3BhdGggPSBvcy5wYXRoLmpvaW4oZGF0YV9kaXIsIGYne3BsYWNlX25hbWUucmVwbGFjZSgiICIsICJfIil9X21pbGl0YXJ5X3pvbmVzX21hcC5odG1sJykKICAgICAgICBtYXBfb3NtLnNhdmUobWFwX2ZpbGVfcGF0aCkKICAgICAgICAKICAgICAgICBpZiBvcy5uYW1lID09ICdudCc6CiAgICAgICAgICAgIG9zLnN0YXJ0ZmlsZShtYXBfZmlsZV9wYXRoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHN1YnByb2Nlc3MucnVuKFsneGRnLW9wZW4nLCBtYXBfZmlsZV9wYXRoXSkKICAgICAgICAKICAgICAgICAjINCS0L7Qt9Cy0YDQsNGCINC/0L7RgdC70LUg0YPRgdC/0LXRiNC90L7Qs9C+INC30LDQstC10YDRiNC10L3QuNGPINC/0L7QuNGB0LrQsAogICAgICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoJ2luZGV4Lmh0bWwnLCBmb2xkZXJzPW9zLmxpc3RkaXIoJ2RhdGEvJyksIHJlc3VsdF9tZXNzYWdlPSIiKSAgIyDQo9Cx0YDQsNC90L4g0YHQvtC+0LHRidC10L3QuNC1CgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoJ2luZGV4Lmh0bWwnLCBmb2xkZXJzPW9zLmxpc3RkaXIoJ2RhdGEvJyksIHJlc3VsdF9tZXNzYWdlPSJUaGUgZW50ZXJlZCBzZWFyY2ggZGF0YSBpcyBpbmNvcnJlY3QuIikKICAgIAogICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgnaW5kZXguaHRtbCcsIGZvbGRlcnM9b3MubGlzdGRpcignZGF0YS8nKSkKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBhcHAucnVuKGhvc3Q9JzEyNy4wLjAuMScsIHBvcnQ9NTAwMSkK'''
exec(base64.b64decode(code).decode())
